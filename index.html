<html>
    <head>
        <title>Calculadora de CORE</title>
        <meta charset="utf-8">
        <script type="text/javascript">

            let acumulador =0;
            let operador ="";

            const getValorEntrada=()=>{ //Coger valor de pantalla
            return Number(document.getElementById("pantalla").value);
            }

            const setValorEntrada=(valor)=>{//Cambiar valor de pantalla
                document.getElementById("pantalla").value=valor;
            }

            const vaciarInput=()=>{//Vaciar Input
                document.getElementById("pantalla").value="";
            }

            const validar = () => {
                if ( Number.isNaN(getValorEntrada) ) {
                    acumulador=0;
                    operador="";
                    setValorEntrada("Error");
                    return false;
                }
                return true;
            }

            const rellenar_info = () => {
                const resultadoInput = getInputValue();
                let mensaje = "";

                if (Number.isNaN(resultadoInput)) {
                    mensaje = "ERROR";
                }

                else {
                    if (resultadoInput < 100) {
                        mensaje = "Info: El resultado es menor que 100";
                    }
                    else if (resultadoInput <= 200) {
                        mensaje = "Info: El resultado está entre 100 y 200";
                    }
                    else {
                        mensaje = "Info: El resultado es superior a 200";
                    }
                }
                document.getElementById("info").innerHTML = mensaje;
            }

            const acumula = n=>{//Acumulador
                switch(operador){
                    case "":acumulador =n; break; 
                    case"+":acumulador +=n; break; //addAcumulator(n); addAcumulator('+');
                    case"-":acumulador -=n; break; //addAcumulator(n); addAcumulator('-');
                    case"*":acumulador *=n; break; //addAcumulator(n); addAcumulator('*');
                    case"/":acumulador /=n; break; //addAcumulator(n); addAcumulator('/');
                }
            }

            const sq = () =>{ //Funcion cuadrado
                if(!validar()) {
                        return;}
                let ValorEntrada = getValorEntrada();
                let resultado = ValorEntrada*ValorEntrada;
                setValorEntrada(resultado);
                rellenar_info();
                
            }

            const fact = () =>{//Funcion factorial
                if(!validar()) {
                        return;}
                let ValorEntrada = getValorEntrada();
                let resultado = 1;
                for (ValorEntrada; ValorEntrada>1;ValorEntrada--){
                    resultado *= ValorEntrada;
                }
                setValorEntrada(resultado);
                rellenar_info();
            }

            const sqr = () =>{//Funcion raiz cuadrada
                if(!validar()) {
                        return;}
                let ValorEntrada = getValorEntrada();
                let resultado = Math.sqrt(ValorEntrada);
                setValorEntrada(resultado);
                // setValorEntrada(Math.sqrt(getValorEntrada));
                rellenar_info();
            }

            const add=()=>{//Funcion suma
                if(!validar()) {
                        return;}
                acumula(getValorEntrada());
                operador = "+";
                vaciarInput();
                rellenar_info();
            }

            const sub=()=>{//funcion resta
                if(!validar()) {
                        return;}
                acumula(getValorEntrada());
                operador="-";
                vaciarInput();
                rellenar_info();
            }

            const mul=()=>{//funcion multiplicacion
                if(!validar()) {
                        return;}
                acumula(getValorEntrada());
                operador="*";
                vaciarInput();
                rellenar_info();
            }

            const div=()=>{//Funcion division
                if(!validar()) {
                        return;}
                acumula(getValorEntrada());
                operador="/";
                vaciarInput();
                rellenar_info();
            }

            const eq =()=>{//funcion igual
                if(!validar()) {
                        return;}
                acumula(getValorEntrada());
                operador = "";
                // vaciarInput();
                setValorEntrada(acumulador);
                rellenar_info();
            }

            const onload =()=>{//En carga
                document.getElementById("cuadrado").addEventListener("click",sq);
                document.getElementById("factorial").addEventListener("click",fact);
                document.getElementById("raiz").addEventListener("click",sqr);
                document.getElementById("suma").addEventListener("click",add);
                document.getElementById("igual").addEventListener("click",eq);
                document.getElementById("resta").addEventListener("click",sub);
                document.getElementById("multiplicacion").addEventListener("click",mul);
                document.getElementById("division").addEventListener("click",div);
                document.getElementById("inputTexto").addEventListener("click", vaciarInput);
            }

            window.onload = onload;

        </script>
    </head>
        <body>
            <h2 class="cabecera">Calculadora de Core</h2>
            <div id="inputTexto">
                <input type="text" id="pantalla"></input> 
            </div>   
            <h3 class="cabecera" title="Unitarias">Operaciones unitarias</h3>
            <div class="operaciones">    
                <button id="cuadrado">x<sup>2</sup></button>
                <button id="factorial">x!</button>
                <button id="raiz">&#8730 x</button>
            </div> 
            <h3 class="cabecera" title="binarias">Operaciones binarias</h3>
            <div class="operaciones">
                <button id="suma"> + </button>
                <button id="resta"> - </button>
                <button id="multiplicacion"> * </button>
                <button id="division"> / </button>
                <button id="igual"> = </button>
            </div>
            <h2 id="info" class="grande" title="Info sobre el número">Info sobre el número</h2>
            <h3 class="cabecera">Acumulador</h3>
            <div id="valoresAcumulador">
            </div>
        </body>
</html>